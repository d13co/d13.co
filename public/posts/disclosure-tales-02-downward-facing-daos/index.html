<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Disclosure Tales 02: Downward Facing DAOs | D13.co</title>
<meta name=keywords content="Vulnerability Disclosure,TEAL Audit,Whitehat Operation"><meta name=description content="I discovered and disclosed a vulnerability in the Updog and FAME DAO contracts. Then I hacked them. This story is not boring.
Background: The DAOs
Updog offered a fully featured DAO platform. In a nutshell:


Each DAO instance has a governance token that can be staked and withdrawn.


The DAO contracts could control assets and ALGO. Payments of both types could be executed trustlessly after a proposal passed with enough votes.


Voting power is proportional to the staked amount of governance tokens in the DAO."><meta name=author content="Bit @ D13.co"><link rel=canonical href=https://d13.co/posts/disclosure-tales-02-downward-facing-daos/><link crossorigin=anonymous href=/assets/css/stylesheet.4d47a558fed7688229f8bb73344ccfcd4003dac666a96a34cc665d38ad5f6ec8.css integrity="sha256-TUelWP7XaIIp+LtzNEzPzUAD2sZmqWo0zGZdOK1fbsg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://d13.co/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://d13.co/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://d13.co/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://d13.co/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://d13.co/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://d13.co/posts/disclosure-tales-02-downward-facing-daos/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Disclosure Tales 02: Downward Facing DAOs"><meta property="og:description" content="I discovered and disclosed a vulnerability in the Updog and FAME DAO contracts. Then I hacked them. This story is not boring.
Background: The DAOs
Updog offered a fully featured DAO platform. In a nutshell:


Each DAO instance has a governance token that can be staked and withdrawn.


The DAO contracts could control assets and ALGO. Payments of both types could be executed trustlessly after a proposal passed with enough votes.


Voting power is proportional to the staked amount of governance tokens in the DAO."><meta property="og:type" content="article"><meta property="og:url" content="https://d13.co/posts/disclosure-tales-02-downward-facing-daos/"><meta property="og:image" content="https://d13.co/dt02.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-29T00:06:38+00:00"><meta property="article:modified_time" content="2023-12-29T00:06:38+00:00"><meta property="og:site_name" content="D13.co"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://d13.co/dt02.jpg"><meta name=twitter:title content="Disclosure Tales 02: Downward Facing DAOs"><meta name=twitter:description content="I discovered and disclosed a vulnerability in the Updog and FAME DAO contracts. Then I hacked them. This story is not boring.
Background: The DAOs
Updog offered a fully featured DAO platform. In a nutshell:


Each DAO instance has a governance token that can be staked and withdrawn.


The DAO contracts could control assets and ALGO. Payments of both types could be executed trustlessly after a proposal passed with enough votes.


Voting power is proportional to the staked amount of governance tokens in the DAO."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://d13.co/posts/"},{"@type":"ListItem","position":2,"name":"Disclosure Tales 02: Downward Facing DAOs","item":"https://d13.co/posts/disclosure-tales-02-downward-facing-daos/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Disclosure Tales 02: Downward Facing DAOs","name":"Disclosure Tales 02: Downward Facing DAOs","description":"I discovered and disclosed a vulnerability in the Updog and FAME DAO contracts. Then I hacked them. This story is not boring.\nBackground: The DAOs Updog offered a fully featured DAO platform. In a nutshell:\nEach DAO instance has a governance token that can be staked and withdrawn.\nThe DAO contracts could control assets and ALGO. Payments of both types could be executed trustlessly after a proposal passed with enough votes.\nVoting power is proportional to the staked amount of governance tokens in the DAO.\n","keywords":["Vulnerability Disclosure","TEAL Audit","Whitehat Operation"],"articleBody":"I discovered and disclosed a vulnerability in the Updog and FAME DAO contracts. Then I hacked them. This story is not boring.\nBackground: The DAOs Updog offered a fully featured DAO platform. In a nutshell:\nEach DAO instance has a governance token that can be staked and withdrawn.\nThe DAO contracts could control assets and ALGO. Payments of both types could be executed trustlessly after a proposal passed with enough votes.\nVoting power is proportional to the staked amount of governance tokens in the DAO.\nThe most notable Updog DAO was the ‚ÄúCoffeebean DAO‚Äù, which housed a large number of NFTs with an floor value of at least 56,000 $ALGO.\nThe FAME DAO launched recently. It licensed the Updog contracts but had its own frontend.\nThe vulnerability Due to insufficient validation in the staking method, a malicious user can drain all governance tokens from the DAO, as well as gain super-majority voting power.\nA normal staking call The staking method normally looks like this:\nAn asset transfer of the governance token (BEANGOV) to the contract‚Äôs escrow address (B43GQ..) An Application call with the staking method argument ls / bHM= The stake call would then increase the total locked amount (tl in global state) and the user‚Äôs staked amount (s in local state.)\nA malicious staking call The contract code does not validate the staking transaction group‚Äôs size. This means that a single asset transfer could be padded with 15 staking application calls, and the user would be credited with 15x more stake than they sent.\nThe credited stake could then be withdrawn (at a cost of 1 ALGO, usually), so to drain the contract of all governance tokens, a user could start with a trivial amount of tokens, and then loop stake-withdraw calls until they withdraw all the tokens. In just 3 deposit-withdraw cycles, the initial amount would be withdrawn 3375x at a cost of 3 ALGO.\nDue to how this story unfolded, you can see an example of this on-chain here:\n(It is generally not cool to do this. Simulate can be used to confirm and disclose a vulnerability without leaving the exploit on-chain in plain sight. I plead extenuating circumstances in this case.)\nDisclosure I disclosed this to the Updog developer on November 8, 2023.\nI sent an email explaining the situation and offering to help rescue the assets. Since the contracts do not have an admin functionality that can circumvent the voting process, the only way to recover the assets would be to attack the DAOs with this exploit.\nState of Affairs Updog DAOs The Updog frontend stopped working some time in the summer of 2023. Currently, the site loads the two main DAOs (degen and coffeebean) but some backend component prevents it from rendering proposals, so it is not usable via the normal route. Some user created DAOs no longer show up there.\nMy read on the situation is that the developer moved on after a lack of traction and general interest. In the Coffeebean discord, there has been conversation about recovering the NFTs locked in the coffeebean DAO contract. Some users are grated that the frontend does not work. I empathise with both sides here:\nThe Updog developer has not made any profit from his efforts, and the fruit of his labor went largely unused, especially lately (2023.) Users demanding that he put in more work can come across as entitled.\nOn the other hand, I understand token holders wanting to vote out their NFTs but not having a viable option to do so.\nA possible middle ground here would have been crowdfunding some amount for the developer to fix the frontend, but this did not materialize.\nThis situation can spark an interesting discussion about ‚Äúcommunity‚Äù development: how long, or how much, is a developer ‚Äúobliged‚Äù to keep working for free? Many such questions. This discussion can be held elsewhere - this will be long enough as it is.\nFAME DAO The FAME DAO‚Äôs current iteration was deployed very recently - Oct 28th, 2023. Its frontend is still operational and the DAO has voted on several proposals.\nDisclosure follow-up I followed up on the disclosure one month later - December 8th, 2023. There was no plan to intervene and recover the assets, but the Updog developer notified the FAME DAO head (Bilal) after my follow-up.\nThe FAME DAO development has branched from the Updog contracts after they were licensed. Bilal was interested in fixing the vulnerability and redeploying a safer contract.\nHowever, this couldn‚Äôt be done without users noticing. Word of ‚Äúan issue‚Äù with the DAO contract would get out, and it would be a small leap to look at the other DAOs as well.\nDecision time If you are me in this situation, what do you do? Choose your own adventure:\nThe vulnerability you found and reported would likely get out. It isn‚Äôt exactly rocket science either, and with 50K+ ALGO worth of Lizards and Berds in just one of the DAOs, this would likely motivate people to steal everything out of the vulnerable DAOs. (JPEGs are addictive, don‚Äôt start)\nDo you‚Ä¶\nüöî Steal shit and keep it?\nüôà Say ‚Äúnot my circus, not my monkeys‚Äù and let the pieces fall wherever they may?\nüò¨ Agonize over the ethics of attacking the DAOs to rescue the assets in order to return them?\nI went with ‚Äúagonizing‚Äù. I used the phone-a-friend helpline twice to check myself that this is the right thing to do. The phone friends didn‚Äôt try to convince me that this was a bad idea, which leads to this disclosure tale turning into a white hat operation story:\nI would try to recover as many of the assets as I can out of the DAOs and return them as best I can.\nThe plan, vaguely Each DAO‚Äôs governance token holdings would be easy to recover. E.g. the FAME DAO mostly had value in FAME, which was also their governance token, so that would take mere minutes to execute: a few loops of deposit 15x -\u003e withdraw stake and all the FAME would be recovered.\nEverything else held by the DAO contracts - ALGO, NFTs, ASAs - would have to be voted out, which would take some time.\nAfter draining the governance tokens, that would give me a big advantage, as I could stake 15x that amount in each deposit/withdraw loop, but still:\nmost of these DAO governance tokens are circulating and available the deposit 15x / withdraw loop would be recorded on chain, and someone could copy it and try to take over A situation where I am contested while draining the DAOs would not be optimal. This was complicated enough already without having to battle someone else for majority.\nHush now The few people in the loop were informed of the intended operation and agreed to keep it on the down-low while it was happening. Myself and two friends would monitor social channels for any potential chain snoopoors that noticed something is amiss.\nA message explaining the situation was hashed and distributed in order to plead for cooperation (‚Ä¶silence‚Ä¶) if someone did notice. The message:\n=============HASH BELOW THIS LINE========== The Updog DAO code contains a critical vulnerability that allows hostile takeover. Some of the affected DAOs: Updog, Coffeebean, Fame. The Updog developer, as well as the Fame DAO head, have been notified of this vulnerability. The devs working with Fame (who licensed the Updog code) are working on a patched version. When the Fame DAO is migrated to the patched version, the existence of the vulnerability will become known. At that point it will be inevitable that someone would look closely at the other DAOs that share the code, and it would become a race to take over and steal those assets. Doing nothing would almost certainly result in the DAOs being attacked by someone else. As such I think the right thing to do is to attack the DAOs and recover all the assets in order to return them to their rightful owners. The Coffebean DAO holds 564 different assets, all of which have to be voted out sequentially, which will take some time. If you are reading this before the situation is made public, please consider keeping it to yourself, or contacting me* privately if you have concerns. While the exploit enables a kind of first-mover advantage - which I am utilising - my control over the DAOs can still be contested while the rescue op is ongoing. If you want to beat me over the head for this decision, you will have an opportunity to do so soon enough, without risking the operation that is already in progress. The hash of this message will be posted on-chain in advance of the attack from my address DTHIRTEENNLSYGLSEXTXC6X4SVDWMFRCPAOAUCXWIXJRCVBWIIGLYARNQE I will do my best to ensure a fair outcome for all involved. - Bit @ D13 * Contacts: Email: bit@d13.co X: @d13_co If I am unavailable, @GovernorHat - /u/GhostOfMcAfee is also in the loop about some high level details. =============HASH ABOVE THIS LINE========== Hash: 63fedd015bbd8e9337e152ea8459ff4d97dba3984cf0e200dda12427321e8774 (SHA256)\nTxn ID: (note) https://app.dappflow.org/explorer/transaction/RJMAEFB663XP54CYQTECI4ACNFUZQIF7L4CHBOWUHDYBL2DVC3FA\nWith the Updog frontend non-operational, the only web-facing hint that something is amiss would be the FAME DAO frontend. Bilal agreed to put up a maintenance notice and wait until this operation is complete before announcing anything. I am grateful for this cooperation.\nThe plan, more concretely As mentioned in the hashed message, the coffeebean DAO held hundreds of assets (564) so a manual operation was entirely out of the question.\nI cloned the coffeebean contract in a local Algorand sandbox and started coding a bot.\nOne of the Updog features that enabled this operation to take place at all was the ‚Äúchange duration‚Äù type of vote. The default configuration for coffeebean was: 3 day voting period, plus one day cooldown between votes. If this could not be changed, it would take over 6 years to recover all the assets.\nThe minimum accepted voting duration was thankfully very short (60 seconds) and the cooldown is also configurable (30 minutes minimum.) After getting stake supermajority, the first order of business was to change these values to the minimums.\nThe DAOs also have a configurable required threshold for a vote to pass. This was also set to the maximum possible amount, in order to deter votes passing against my stake (slashing was also possible) in case my bot malfunctioned while I was not monitoring the progress.\nCoffeebean supports a proposal type that votes out 3 NFTs at a time, which was handy for accelerating the recovery - this was also utilized where possible (single amount assets.)\nThe overall flow of the bot was:\nConfigure duration Configure pass threshold Vote out NFTs, ordered by their value Vote out ASAs and multimint NFTs, no particular order Vote out ALGO More granularly, each of these steps includes:\nProposing the vote Checking if a vote is active If the active vote is desirable, vote it up Waiting for the voting period to end Executing the vote outcome, if it is desirable Waiting for the cooldown period to end, so that the next vote can be proposed These checks were performed every single round.\nFinally, each DAO is different - application ID, governance token asset ID, etc. - so the bot would have configurations so that it could be executed in tandem for multiple DAOs at the same time.\n[OMINOUSLY] While I hadn‚Äôt realized at the time, some of the DAOs also differed significantly in implementation.\nGo time December 16 was Go Time.\nThe FAME tokens were recovered first using this account: ZZLPDZA5774SFE7HQUSSHNGI7FRCX5VQMXH7KUZYEE7WWXLM5KSNECXEKU.\nAll Updog DAO related transactions were performed from this account: 325OX7FO743TRL7N7W534L6P7U5ZXJCCUAP57N46KDN7AXPAV6OXT5L74Q.\nThe Updog DAOs in question:\nCoffeebean DAO DEGEN 2.1 DAO DEGEN 2? DEGEN 1? Treats DAO Updog COOP DAO Fry Foundation Vote DAO Some DAOs had stricted minimum duration parameters. One is still slowly drained of ALGO.\nMost of the DAOs‚Äô recovery went as planned‚Ä¶\nA mistake ‚Ä¶but not all. During the recovery I realised that some of the earlier DAOs had significant differences in implementation. I had to fork my bot code and re-implement it to accommodate for their differences:\nthe proposal type pt had completely different values, e.g. pay_algo vs pa different restrictions in proposals e.g. ALGO proposals restrict the amount to 10% of the total. there is a manager address etc During this time I was also travelling for the holidays, so I had to check in on how the bots were doing. 4 DAOs were being manipulated in parallel - Coffeebean and the 3 DAOs marked ‚ÄúDEGEN‚Äù above.\nUnfortunately, I inadvertently froze one of the DAOs. A passed proposal was not executed in time, which rendered the DAO inoperable.\nThe logic to execute passed proposals in that DAO has a restriction: ‚ÄúProposals can only be executed within 24 hours of the vote end time‚Äù\nCreating a new proposal also has a restriction: ‚ÄúCannot create a new proposal before the previous proposal is executed‚Äù\nThe bug that bit me was in this point above: Executing the vote outcome, if it is desirable. The change-manager vote was not registered as desirable, so it was not executed automatically (voting it up was done manually.)\nWhile there is normally a workaround for clearing proposals, it could not be used in this case. The ‚Äúmanager‚Äù address can clear a vote - unless it is a ‚Äúchange manager‚Äù vote‚Ä¶ which is the vote type I had just passed to make myself manager of the DAO. The previous manager address was also lost in the MyAlgo hack, but it wouldn‚Äôt have been able to clear the vote even if it was still available.\nSo that sucked.\nReturning the assets The entire point of this operation was to rescue the assets before someone can steal them, and return them to their ‚Äúrightful owners‚Äù.\nGovernance Tokens: FAME, FRY, TREATS, COOP The FAME tokens have been returned already. By virtue of being active very recently, we can assume that the addresses that staked FAME in their DAO in the past few months have not been compromised.\nThe FRY, TREATS and COOP tokens that were recovered will be returned to the addresses that staked them after a soft verification that the ownership has not changed.\nUpdate: All the above have been returned - except for one TRTS holder who is no longer opted in.\nCoffeebean NFTs For NFTs, which were not tied to voting power/stake, the current plan is to return them to the owners that deposited them.\nBesides the logistic issue of tracking everything down (the previous iteration of the Coffeebean treasury was a multisig, but that should not add too much complexity) the other big issue is that some of the deposit addresses are reported to have been lost in the MyAlgo hack, which means we will likely have to resort to social recovery in some cases.\nBEANGOV Tokens BEANGOV, the Coffeebean DAO governance token, had some liquidity in tinyman - approx $840 in TVL.\nThe BEANGOV extracted from the contract was sold for $ALGO shortly before this article went live. The intent was to remove the first mover advantage of BEAN holders who got wind of this situation first.\nALGO \u0026 Fungibles The current plan for the ALGO and fungible tokens recovered is to distribute them to BEANGOV holders. This includes the ALGO from the ‚Äúliquidated‚Äù BEANGOV as mentioned above. The people with ‚Äústake‚Äù in the Coffeebean DAO are currently thought to be:\nBEANGOV holders BEANGOV LP providers Addresses with staked BEANGOV in the Coffeebean DAO For the other DAOs that had these kind of assets, a similar plan will be executed based on stake.\nTimeline Returning the assets will not be a quick or easy task. Tracking down long dormant or rekeyed addresses may prove difficult, and the sheer number of DAOs / assets / addresses will prove to be a challenge. I hope we can overcome it together.\nMy current priority is to return the easiest assets first, which are the governance tokens. FAME is already done and FRY / TREATS / COOP should also be relatively straightforward.\nFor the Coffeebean \u0026 DEGEN assets, the next steps will be a bunch of accounting: document the provenance of NFTs \u0026 other assets, track down owners when addresses can be verified to be impacted by MyAlgo, and finally figure out a redistribution plan. I plead for your patience and help in this matter.\nDiscussion You can join the #downward-facing-daos channel in the Coffeebean Discord to discuss.\nYou can shout at me on the app formerly known as Twitter.\nClosing Thoughts I am not sure how you will react to this. I probably should have left it alone, but I didn‚Äôt like the most likely outcome: someone stealing these assets and keeping them.\nWe have had enough Ls in 2023 as a community, and I thought to try and prevent another one. This is not a victory lap; value was lost over this, and no matter how we slice and dice it, some people will be dissatisfied.\nDoing all this was significant work, and even more lies ahead in figuring out how, where and how much to return to each ‚Äústake holder‚Äù.\n","wordCount":"2853","inLanguage":"en","image":"https://d13.co/dt02.jpg","datePublished":"2023-12-29T00:06:38Z","dateModified":"2023-12-29T00:06:38Z","author":{"@type":"Person","name":"Bit @ D13.co"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://d13.co/posts/disclosure-tales-02-downward-facing-daos/"},"publisher":{"@type":"Organization","name":"D13.co","logo":{"@type":"ImageObject","url":"https://d13.co/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://d13.co/ accesskey=h title="  (Alt + H)"><img src=https://d13.co/images/logo-7-green-128.png alt=logo aria-label=logo height=48></a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://d13.co/>Home</a>&nbsp;¬ª&nbsp;<a href=https://d13.co/posts/>Posts</a></div><h1 class=post-title>Disclosure Tales 02: Downward Facing DAOs</h1><div class=post-meta>&lt;span title='2023-12-29 00:06:38 +0000 +0000'>December 29, 2023&lt;/span>&amp;nbsp;¬∑&amp;nbsp;14 min&amp;nbsp;¬∑&amp;nbsp;2853 words&amp;nbsp;¬∑&amp;nbsp;Bit @ D13.co&nbsp;|&nbsp;<a href=https://github.com/d13co/d13.co/tree/main/content/posts/disclosure-tales-02-downward-facing-dao/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=lazy srcset="https://d13.co/posts/disclosure-tales-02-downward-facing-daos/dt02_hu7539032040188235571.jpg 360w ,https://d13.co/posts/disclosure-tales-02-downward-facing-daos/dt02_hu14291321152033762433.jpg 480w ,https://d13.co/posts/disclosure-tales-02-downward-facing-daos/dt02_hu8218772490769846157.jpg 720w ,https://d13.co/posts/disclosure-tales-02-downward-facing-daos/dt02.jpg 1024w" sizes="(min-width: 768px) 720px, 100vw" src=https://d13.co/posts/disclosure-tales-02-downward-facing-daos/dt02.jpg alt width=1024 height=768></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#background-the-daos>Background: The DAOs</a></li><li><a href=#the-vulnerability>The vulnerability</a><ul><li><a href=#a-normal-staking-call>A normal staking call</a></li><li><a href=#a-malicious-staking-call>A malicious staking call</a></li></ul></li><li><a href=#disclosure>Disclosure</a></li><li><a href=#state-of-affairs>State of Affairs</a><ul><li><a href=#updog-daos>Updog DAOs</a></li><li><a href=#fame-dao>FAME DAO</a></li></ul></li><li><a href=#disclosure-follow-up>Disclosure follow-up</a><ul><li><a href=#decision-time>Decision time</a></li></ul></li><li><a href=#the-plan-vaguely>The plan, vaguely</a><ul><li><a href=#hush-now>Hush now</a></li></ul></li><li><a href=#the-plan-more-concretely>The plan, more concretely</a></li><li><a href=#go-time>Go time</a></li><li><a href=#a-mistake>A mistake</a></li><li><a href=#returning-the-assets>Returning the assets</a><ul><li><a href=#governance-tokens-fame-fry-treats-coop>Governance Tokens: FAME, FRY, TREATS, COOP</a></li><li><a href=#coffeebean-nfts>Coffeebean NFTs</a></li><li><a href=#beangov-tokens>BEANGOV Tokens</a></li><li><a href=#algo--fungibles>ALGO & Fungibles</a></li></ul></li><li><a href=#timeline>Timeline</a></li><li><a href=#discussion>Discussion</a></li><li><a href=#closing-thoughts>Closing Thoughts</a></li></ul></nav></div></details></div><div class=post-content><p>I discovered and disclosed a vulnerability in the <a href=https://www.updog.vote>Updog</a> and <a href=https://www.algofame.org/dao>FAME</a> DAO contracts. Then I hacked them. This story is not boring.</p><h2 id=background-the-daos>Background: The DAOs<a hidden class=anchor aria-hidden=true href=#background-the-daos>#</a></h2><p><a href=https://www.updog.vote>Updog</a> offered a fully featured DAO platform. In a nutshell:</p><ol><li><p>Each DAO instance has a governance token that can be staked and withdrawn.</p></li><li><p>The DAO contracts could control assets and ALGO. Payments of both types could be executed trustlessly after a proposal passed with enough votes.</p></li><li><p>Voting power is proportional to the staked amount of governance tokens in the DAO.</p></li></ol><p>The most notable Updog DAO was the &ldquo;Coffeebean DAO&rdquo;, which housed a large number of NFTs with an floor value of at least 56,000 $ALGO.</p><p>The FAME DAO launched recently. It licensed the Updog contracts but had its <a href=https://www.algofame.org/dao>own frontend</a>.</p><h2 id=the-vulnerability>The vulnerability<a hidden class=anchor aria-hidden=true href=#the-vulnerability>#</a></h2><p>Due to insufficient validation in the staking method, a malicious user can drain all governance tokens from the DAO, as well as gain super-majority voting power.</p><h3 id=a-normal-staking-call>A normal staking call<a hidden class=anchor aria-hidden=true href=#a-normal-staking-call>#</a></h3><p>The staking method normally <a href=https://app.dappflow.org/explorer/group/6n2fxAxrIlK7zap1%2BhWitBo0xnCFa1lDGAiEp1g4ih8%3D/33028267/transactions>looks like this</a>:</p><p><img loading=lazy src=good-stake.png alt></p><ol><li>An asset transfer of the governance token (BEANGOV) to the contract&rsquo;s escrow address (B43GQ..)</li><li>An Application call with the staking method argument <code>ls</code> / <code>bHM=</code></li></ol><p>The stake call would then increase the total locked amount (<code>tl</code> in global state) and the user&rsquo;s staked amount (<code>s</code> in local state.)</p><p><img loading=lazy src=good-stake-state.png alt></p><h3 id=a-malicious-staking-call>A malicious staking call<a hidden class=anchor aria-hidden=true href=#a-malicious-staking-call>#</a></h3><p>The contract code does not validate the staking transaction group&rsquo;s size. This means that a single asset transfer could be padded with 15 staking application calls, and the user would be credited with 15x more stake than they sent.</p><p>The credited stake could then be withdrawn (at a cost of 1 ALGO, usually), so to drain the contract of all governance tokens, a user could start with a trivial amount of tokens, and then loop stake-withdraw calls until they withdraw all the tokens. In just 3 deposit-withdraw cycles, the initial amount would be withdrawn 3375x at a cost of 3 ALGO.</p><p>Due to how this story unfolded, you can see an example of this on-chain <a href=https://app.dappflow.org/explorer/group/4OMym%2FVi3WKs8PLkEJESsclkQtNUJBI7KGshLgJcTrA%3D/34464554/transactions>here</a>:</p><p><img loading=lazy src=bad-stake.png alt></p><p><em>(It is generally not cool to do this. <a href=/posts/disclosure-tales-01-honing-fire/#simulating-validation>Simulate can be used to confirm and disclose a vulnerability</a> without leaving the exploit on-chain in plain sight. I plead extenuating circumstances in this case.)</em></p><h2 id=disclosure>Disclosure<a hidden class=anchor aria-hidden=true href=#disclosure>#</a></h2><p>I disclosed this to the Updog developer on November 8, 2023.</p><p>I sent an email explaining the situation and offering to help rescue the assets. Since the contracts do not have an admin functionality that can circumvent the voting process, the only way to recover the assets would be to attack the DAOs with this exploit.</p><h2 id=state-of-affairs>State of Affairs<a hidden class=anchor aria-hidden=true href=#state-of-affairs>#</a></h2><h3 id=updog-daos>Updog DAOs<a hidden class=anchor aria-hidden=true href=#updog-daos>#</a></h3><p>The Updog frontend stopped working some time in the summer of 2023. Currently, the site loads the two main DAOs (degen and coffeebean) but some backend component prevents it from rendering proposals, so it is not usable via the normal route. Some user created DAOs no longer show up there.</p><p>My read on the situation is that the developer moved on after a lack of traction and general interest. In the Coffeebean discord, there has been conversation about recovering the NFTs locked in the coffeebean DAO contract. Some users are grated that the frontend does not work. I empathise with both sides here:</p><p>The Updog developer has not made any profit from his efforts, and the fruit of his labor went largely unused, especially lately (2023.) Users demanding that he put in more work can come across as entitled.</p><p>On the other hand, I understand token holders wanting to vote out their NFTs but not having a viable option to do so.</p><p>A possible middle ground here would have been crowdfunding some amount for the developer to fix the frontend, but this did not materialize.</p><p>This situation can spark an interesting discussion about &ldquo;community&rdquo; development: how long, or how much, is a developer &ldquo;obliged&rdquo; to keep working for free? Many such questions. This discussion can be held elsewhere - this will be long enough as it is.</p><h3 id=fame-dao>FAME DAO<a hidden class=anchor aria-hidden=true href=#fame-dao>#</a></h3><p>The FAME DAO&rsquo;s current iteration was deployed very recently - <a href=https://app.dappflow.org/explorer/transaction/DDYRVWJH6C6RIQIXADWK7Q6VK63VPZVKXZKCT3XCHAVB5WH554RA>Oct 28th, 2023</a>. Its frontend is still operational and the DAO has voted on several proposals.</p><h2 id=disclosure-follow-up>Disclosure follow-up<a hidden class=anchor aria-hidden=true href=#disclosure-follow-up>#</a></h2><p>I followed up on the disclosure one month later - December 8th, 2023. There was no plan to intervene and recover the assets, but the Updog developer notified the FAME DAO head (Bilal) after my follow-up.</p><p>The FAME DAO development has branched from the Updog contracts after they were licensed. Bilal was interested in fixing the vulnerability and redeploying a safer contract.</p><p>However, this couldn&rsquo;t be done without users noticing. Word of &ldquo;an issue&rdquo; with the DAO contract would get out, and it would be a small leap to look at the other DAOs as well.</p><p><img loading=lazy src=meme.jpg alt></p><h3 id=decision-time>Decision time<a hidden class=anchor aria-hidden=true href=#decision-time>#</a></h3><p>If you are me in this situation, what do you do? Choose your own adventure:</p><p>The vulnerability you found and reported would likely get out. It isn&rsquo;t exactly rocket science either, and with 50K+ ALGO worth of Lizards and Berds in just one of the DAOs, this would likely motivate people to steal everything out of the vulnerable DAOs. (JPEGs are addictive, don&rsquo;t start)</p><p><strong>Do you&mldr;</strong></p><p>üöî Steal shit and keep it?</p><p>üôà Say &ldquo;not my circus, not my monkeys&rdquo; and let the pieces fall wherever they may?</p><p>üò¨ Agonize over the ethics of attacking the DAOs to rescue the assets in order to return them?</p><hr><p><img loading=lazy src=whitehats.jpg alt></p><p>I went with &ldquo;agonizing&rdquo;. I used the phone-a-friend helpline twice to check myself that this is the right thing to do. The phone friends didn&rsquo;t try to convince me that this was a bad idea, which leads to this disclosure tale turning into a white hat operation story:</p><p>I would try to recover as many of the assets as I can out of the DAOs and return them as best I can.</p><h2 id=the-plan-vaguely>The plan, vaguely<a hidden class=anchor aria-hidden=true href=#the-plan-vaguely>#</a></h2><p>Each DAO&rsquo;s governance token holdings would be easy to recover. E.g. the FAME DAO mostly had value in FAME, which was also their governance token, so that would take mere minutes to execute: a few loops of <code>deposit 15x -> withdraw stake</code> and all the FAME would be recovered.</p><p>Everything else held by the DAO contracts - ALGO, NFTs, ASAs - would have to be voted out, which would take some time.</p><p>After draining the governance tokens, that would give me a big advantage, as I could stake 15x that amount in each deposit/withdraw loop, but still:</p><ol><li>most of these DAO governance tokens are circulating and available</li><li>the deposit 15x / withdraw loop would be recorded on chain, and someone could copy it and try to take over</li></ol><p>A situation where I am contested while draining the DAOs would not be optimal. This was complicated enough already without having to battle someone else for majority.</p><h3 id=hush-now>Hush now<a hidden class=anchor aria-hidden=true href=#hush-now>#</a></h3><p>The few people in the loop were informed of the intended operation and agreed to keep it on the down-low while it was happening. Myself and two friends would monitor social channels for any potential chain snoopoors that noticed something is amiss.</p><style>.details-collapsible{background:rgba(127,127,127,.2);padding:1.5em 1.25em;border-radius:3px;display:flex;flex-direction:row;margin-bottom:20px;padding-bottom:.5rem}.details-collapsible p:first-of-type{border-top:1px rgba(127,127,127,.2)solid;padding-top:.75em}.details-collapsible p{margin-left:1em}.details-collapsible summary{margin-bottom:1em}.details-collapsible summary::marker{border:1px red solid}@media(max-width:767px){#details-collapsible{padding:1.5em .75em 1.5em .6em}#details-collapsible-inner{margin-left:.5em}}</style><details class=details-collapsible><summary>A message explaining the situation was hashed and distributed in order to plead for cooperation (&mldr;silence&mldr;) if someone did notice.</summary><p>The message:</p><pre tabindex=0><code>=============HASH BELOW THIS LINE==========
The Updog DAO code contains a critical vulnerability that allows hostile takeover. Some of the affected DAOs: Updog, Coffeebean, Fame.

The Updog developer, as well as the Fame DAO head, have been notified of this vulnerability. The devs working with Fame (who licensed the Updog code) are working on a patched version.

When the Fame DAO is migrated to the patched version, the existence of the vulnerability will become known. At that point it will be inevitable that someone would look closely at the other DAOs that share the code, and it would become a race to take over and steal those assets.

Doing nothing would almost certainly result in the DAOs being attacked by someone else. As such I think the right thing to do is to attack the DAOs and recover all the assets in order to return them to their rightful owners.

The Coffebean DAO holds 564 different assets, all of which have to be voted out sequentially, which will take some time.

If you are reading this before the situation is made public, please consider keeping it to yourself, or contacting me* privately if you have concerns. While the exploit enables a kind of first-mover advantage - which I am utilising - my control over the DAOs can still be contested while the rescue op is ongoing. If you want to beat me over the head for this decision, you will have an opportunity to do so soon enough, without risking the operation that is already in progress.

The hash of this message will be posted on-chain in advance of the attack from my address DTHIRTEENNLSYGLSEXTXC6X4SVDWMFRCPAOAUCXWIXJRCVBWIIGLYARNQE

I will do my best to ensure a fair outcome for all involved.

- Bit @ D13

* Contacts:

Email: bit@d13.co

X: @d13_co

If I am unavailable, @GovernorHat - /u/GhostOfMcAfee is also in the loop about some high level details.

=============HASH ABOVE THIS LINE==========
</code></pre><p>Hash: 63fedd015bbd8e9337e152ea8459ff4d97dba3984cf0e200dda12427321e8774 (SHA256)</p><p>Txn ID: (note) <a href=https://app.dappflow.org/explorer/transaction/RJMAEFB663XP54CYQTECI4ACNFUZQIF7L4CHBOWUHDYBL2DVC3FA>https://app.dappflow.org/explorer/transaction/RJMAEFB663XP54CYQTECI4ACNFUZQIF7L4CHBOWUHDYBL2DVC3FA</a></p></details><p>With the Updog frontend non-operational, the only web-facing hint that something is amiss would be the FAME DAO frontend. Bilal agreed to put up a maintenance notice and wait until this operation is complete before announcing anything. I am grateful for this cooperation.</p><h2 id=the-plan-more-concretely>The plan, more concretely<a hidden class=anchor aria-hidden=true href=#the-plan-more-concretely>#</a></h2><p>As mentioned in the hashed message, the coffeebean DAO held hundreds of assets (564) so a manual operation was entirely out of the question.</p><p>I cloned the coffeebean contract in a local Algorand sandbox and started coding a bot.</p><p>One of the Updog features that enabled this operation to take place at all was the &ldquo;change duration&rdquo; type of vote. The default configuration for coffeebean was: 3 day voting period, plus one day cooldown between votes. If this could not be changed, it would take over 6 years to recover all the assets.</p><p>The minimum accepted voting duration was thankfully very short (60 seconds) and the cooldown is also configurable (30 minutes minimum.) After getting stake supermajority, the first order of business was to change these values to the minimums.</p><p>The DAOs also have a configurable required threshold for a vote to pass. This was also set to the maximum possible amount, in order to deter votes passing against my stake (slashing was also possible) in case my bot malfunctioned while I was not monitoring the progress.</p><p>Coffeebean supports a proposal type that votes out 3 NFTs at a time, which was handy for accelerating the recovery - this was also utilized where possible (single amount assets.)</p><p>The overall flow of the bot was:</p><ul><li>Configure duration</li><li>Configure pass threshold</li><li>Vote out NFTs, ordered by their value</li><li>Vote out ASAs and multimint NFTs, no particular order</li><li>Vote out ALGO</li></ul><p>More granularly, each of these steps includes:</p><ul><li>Proposing the vote</li><li>Checking if a vote is active</li><li>If the active vote is desirable, vote it up</li><li>Waiting for the voting period to end</li><li>Executing the vote outcome, if it is desirable</li><li>Waiting for the cooldown period to end, so that the next vote can be proposed</li></ul><p>These checks were performed every single round.</p><p>Finally, each DAO is different - application ID, governance token asset ID, etc. - so the bot would have configurations so that it could be executed in tandem for multiple DAOs at the same time.</p><p><em>[OMINOUSLY]</em> While I hadn&rsquo;t realized at the time, some of the DAOs also differed significantly in implementation.</p><h2 id=go-time>Go time<a hidden class=anchor aria-hidden=true href=#go-time>#</a></h2><p>December 16 was Go Time.</p><p>The FAME tokens were recovered first using this account: <a href=https://app.dappflow.org/explorer/account/ZZLPDZA5774SFE7HQUSSHNGI7FRCX5VQMXH7KUZYEE7WWXLM5KSNECXEKU/transactions>ZZLPDZA5774SFE7HQUSSHNGI7FRCX5VQMXH7KUZYEE7WWXLM5KSNECXEKU</a>.</p><p>All Updog DAO related transactions were performed from this account: <a href=https://app.dappflow.org/explorer/account/325OX7FO743TRL7N7W534L6P7U5ZXJCCUAP57N46KDN7AXPAV6OXT5L74Q/transactions>325OX7FO743TRL7N7W534L6P7U5ZXJCCUAP57N46KDN7AXPAV6OXT5L74Q</a>.</p><p>The Updog DAOs in question:</p><ul><li><a href=https://app.dappflow.org/explorer/application/1108232468/transactions>Coffeebean DAO</a></li><li><a href=https://app.dappflow.org/explorer/application/1018462173/transactions>DEGEN 2.1 DAO</a></li><li><a href=https://app.dappflow.org/explorer/application/1012349743/transactions>DEGEN 2?</a></li><li><a href=https://app.dappflow.org/explorer/application/1012804934/transactions>DEGEN 1?</a></li><li><a href=https://app.dappflow.org/explorer/application/1146417048/transactions>Treats DAO</a></li><li><a href=https://app.dappflow.org/explorer/application/1139539266/transactions>Updog COOP DAO</a></li><li><a href=https://app.dappflow.org/explorer/application/1142839041/transactions>Fry Foundation Vote DAO</a></li></ul><p>Some DAOs had stricted minimum duration parameters. One is still slowly drained of ALGO.</p><p>Most of the DAOs&rsquo; recovery went as planned&mldr;</p><h2 id=a-mistake>A mistake<a hidden class=anchor aria-hidden=true href=#a-mistake>#</a></h2><p>&mldr;but not all. During the recovery I realised that some of the earlier DAOs had significant differences in implementation. I had to fork my bot code and re-implement it to accommodate for their differences:</p><ul><li>the proposal type <code>pt</code> had completely different values, e.g. <code>pay_algo</code> vs <code>pa</code></li><li>different restrictions in proposals e.g. ALGO proposals restrict the amount to 10% of the total.</li><li>there is a manager address</li><li>etc</li></ul><p>During this time I was also travelling for the holidays, so I had to check in on how the bots were doing. 4 DAOs were being manipulated in parallel - Coffeebean and the 3 DAOs marked &ldquo;DEGEN&rdquo; above.</p><p>Unfortunately, I inadvertently froze <a href=https://app.dappflow.org/explorer/application/1012349743/transactions>one of the DAOs</a>. A passed proposal was not executed in time, which rendered the DAO inoperable.</p><p>The logic to execute passed proposals in that DAO has a restriction: &ldquo;Proposals can only be executed within 24 hours of the vote end time&rdquo;</p><p>Creating a new proposal also has a restriction: &ldquo;Cannot create a new proposal before the previous proposal is executed&rdquo;</p><p>The bug that bit me was in this point <a href=#the-plan-more-concretely>above</a>: <code>Executing the vote outcome, if it is desirable</code>. The change-manager vote was not registered as desirable, so it was not executed automatically (voting it up was done manually.)</p><p>While there is normally a workaround for clearing proposals, it could not be used in this case. The &ldquo;manager&rdquo; address can clear a vote - <em>unless</em> it is a &ldquo;change manager&rdquo; vote&mldr; which is the vote type I had just passed to make myself manager of the DAO. The previous manager address was also lost in the MyAlgo hack, but it wouldn&rsquo;t have been able to clear the vote even if it was still available.</p><p>So that sucked.</p><h2 id=returning-the-assets>Returning the assets<a hidden class=anchor aria-hidden=true href=#returning-the-assets>#</a></h2><p>The entire point of this operation was to rescue the assets before someone can steal them, and return them to their &ldquo;rightful owners&rdquo;.</p><h3 id=governance-tokens-fame-fry-treats-coop>Governance Tokens: FAME, FRY, TREATS, COOP<a hidden class=anchor aria-hidden=true href=#governance-tokens-fame-fry-treats-coop>#</a></h3><p>The FAME tokens have been returned already. By virtue of being active very recently, we can assume that the addresses that staked FAME in their DAO in the past few months have not been compromised.</p><p>The FRY, TREATS and COOP tokens that were recovered will be returned to the addresses that staked them after a soft verification that the ownership has not changed.</p><p><strong>Update: All the above have been returned</strong> - except for one TRTS holder who is no longer opted in.</p><h3 id=coffeebean-nfts>Coffeebean NFTs<a hidden class=anchor aria-hidden=true href=#coffeebean-nfts>#</a></h3><p>For NFTs, which were not tied to voting power/stake, the current plan is to return them to the <em>owners</em> that deposited them.</p><p>Besides the logistic issue of tracking everything down (the previous iteration of the Coffeebean treasury was a multisig, but that should not add too much complexity) the other big issue is that some of the deposit addresses are reported to have been lost in the MyAlgo hack, which means we will likely have to resort to social recovery in some cases.</p><h3 id=beangov-tokens>BEANGOV Tokens<a hidden class=anchor aria-hidden=true href=#beangov-tokens>#</a></h3><p>BEANGOV, the Coffeebean DAO governance token, had some liquidity in tinyman - approx $840 in TVL.</p><p>The BEANGOV extracted from the contract was sold for $ALGO shortly before this article went live. The intent was to remove the first mover advantage of BEAN holders who got wind of this situation first.</p><h3 id=algo--fungibles>ALGO & Fungibles<a hidden class=anchor aria-hidden=true href=#algo--fungibles>#</a></h3><p>The current plan for the ALGO and fungible tokens recovered is to distribute them to BEANGOV holders. This includes the ALGO from the &ldquo;liquidated&rdquo; BEANGOV as mentioned above. The people with &ldquo;stake&rdquo; in the Coffeebean DAO are currently thought to be:</p><ul><li>BEANGOV holders</li><li>BEANGOV LP providers</li><li>Addresses with staked BEANGOV in the Coffeebean DAO</li></ul><p>For the other DAOs that had these kind of assets, a similar plan will be executed based on stake.</p><h2 id=timeline>Timeline<a hidden class=anchor aria-hidden=true href=#timeline>#</a></h2><p>Returning the assets will not be a quick or easy task. Tracking down long dormant or rekeyed addresses may prove difficult, and the sheer number of DAOs / assets / addresses will prove to be a challenge. I hope we can overcome it together.</p><p>My current priority is to return the easiest assets first, which are the governance tokens. FAME is already done and FRY / TREATS / COOP should also be relatively straightforward.</p><p>For the Coffeebean & DEGEN assets, the next steps will be a bunch of accounting: document the provenance of NFTs & other assets, track down owners when addresses can be verified to be impacted by MyAlgo, and finally figure out a redistribution plan. I plead for your patience and help in this matter.</p><h2 id=discussion>Discussion<a hidden class=anchor aria-hidden=true href=#discussion>#</a></h2><p>You can join the <a href=https://discord.gg/MuJqqUtABW>#downward-facing-daos</a> channel in the Coffeebean Discord to discuss.</p><p>You can shout at me <a href="https://twitter.com/intent/tweet?text=I%20knew%20you%20were%20a%20scoundrel%20%40d13_co%20%23downwardFacingDAOs">on the app formerly known as Twitter</a>.</p><h2 id=closing-thoughts>Closing Thoughts<a hidden class=anchor aria-hidden=true href=#closing-thoughts>#</a></h2><p>I am not sure how you will react to this. I probably should have left it alone, but I didn&rsquo;t like the most likely outcome: someone stealing these assets and keeping them.</p><p>We have had enough Ls in 2023 as a community, and I thought to try and prevent another one. This is not a victory lap; value was lost over this, and no matter how we slice and dice it, some people will be dissatisfied.</p><p>Doing all this was significant work, and even more lies ahead in figuring out how, where and how much to return to each &ldquo;stake holder&rdquo;.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://d13.co/tags/vulnerability-disclosure/>Vulnerability Disclosure</a></li><li><a href=https://d13.co/tags/teal-audit/>TEAL Audit</a></li><li><a href=https://d13.co/tags/whitehat-operation/>Whitehat Operation</a></li></ul><nav class=paginav><a class=prev href=https://d13.co/posts/musing-on-the-pond-dynamic-supply/><span class=title>¬´ Prev</span><br><span>Thoughts on "a" musing on the pond: Dynamic supply for Algorand</span>
</a><a class=next href=https://d13.co/posts/disclosure-tales-01-honing-fire/><span class=title>Next ¬ª</span><br><span>Disclosure Tales 01: Honing Fire</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Disclosure Tales 02: Downward Facing DAOs on twitter" href="https://twitter.com/intent/tweet/?text=Disclosure%20Tales%2002%3a%20Downward%20Facing%20DAOs&amp;url=https%3a%2f%2fd13.co%2fposts%2fdisclosure-tales-02-downward-facing-daos%2f&amp;hashtags=VulnerabilityDisclosure%2cTEALAudit%2cWhitehatOperation"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Disclosure Tales 02: Downward Facing DAOs on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fd13.co%2fposts%2fdisclosure-tales-02-downward-facing-daos%2f&amp;title=Disclosure%20Tales%2002%3a%20Downward%20Facing%20DAOs&amp;summary=Disclosure%20Tales%2002%3a%20Downward%20Facing%20DAOs&amp;source=https%3a%2f%2fd13.co%2fposts%2fdisclosure-tales-02-downward-facing-daos%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Disclosure Tales 02: Downward Facing DAOs on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fd13.co%2fposts%2fdisclosure-tales-02-downward-facing-daos%2f&title=Disclosure%20Tales%2002%3a%20Downward%20Facing%20DAOs"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Disclosure Tales 02: Downward Facing DAOs on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fd13.co%2fposts%2fdisclosure-tales-02-downward-facing-daos%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Disclosure Tales 02: Downward Facing DAOs on whatsapp" href="https://api.whatsapp.com/send?text=Disclosure%20Tales%2002%3a%20Downward%20Facing%20DAOs%20-%20https%3a%2f%2fd13.co%2fposts%2fdisclosure-tales-02-downward-facing-daos%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Disclosure Tales 02: Downward Facing DAOs on telegram" href="https://telegram.me/share/url?text=Disclosure%20Tales%2002%3a%20Downward%20Facing%20DAOs&amp;url=https%3a%2f%2fd13.co%2fposts%2fdisclosure-tales-02-downward-facing-daos%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://d13.co/>D13.co</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>