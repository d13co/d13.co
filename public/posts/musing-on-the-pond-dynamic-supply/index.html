<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Thoughts on "a" musing on the pond: Dynamic supply for Algorand | D13.co</title>
<meta name=keywords content="Algorand protocol,Inflation"><meta name=description content="The &ldquo;Musings on the pond&rdquo; article lays out a thought-provoking proposal for a deep intervention in Algorand&rsquo;s economics. If you have not read it, it is well worth putting it at the top of your reading list and getting to it soon - even now, in fact: if you have the time, go read that first.
Among the proposed interventions is a set of changes to the minimum transaction fee, block rewards and fee burns that would alter the fixed nature of the total supply of Algorand. The present article discusses these changes."><meta name=author content="Bit @ D13.co"><link rel=canonical href=https://d13.co/posts/musing-on-the-pond-dynamic-supply/><link crossorigin=anonymous href=/assets/css/stylesheet.4d47a558fed7688229f8bb73344ccfcd4003dac666a96a34cc665d38ad5f6ec8.css integrity="sha256-TUelWP7XaIIp+LtzNEzPzUAD2sZmqWo0zGZdOK1fbsg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://d13.co/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://d13.co/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://d13.co/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://d13.co/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://d13.co/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://d13.co/posts/musing-on-the-pond-dynamic-supply/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content='Thoughts on "a" musing on the pond: Dynamic supply for Algorand'><meta property="og:description" content="The &ldquo;Musings on the pond&rdquo; article lays out a thought-provoking proposal for a deep intervention in Algorand&rsquo;s economics. If you have not read it, it is well worth putting it at the top of your reading list and getting to it soon - even now, in fact: if you have the time, go read that first.
Among the proposed interventions is a set of changes to the minimum transaction fee, block rewards and fee burns that would alter the fixed nature of the total supply of Algorand. The present article discusses these changes."><meta property="og:type" content="article"><meta property="og:url" content="https://d13.co/posts/musing-on-the-pond-dynamic-supply/"><meta property="og:image" content="https://d13.co/dall-e-princess-frog.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-31T00:13:37+00:00"><meta property="article:modified_time" content="2024-01-31T00:13:37+00:00"><meta property="og:site_name" content="D13.co"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://d13.co/dall-e-princess-frog.png"><meta name=twitter:title content='Thoughts on "a" musing on the pond: Dynamic supply for Algorand'><meta name=twitter:description content="The &ldquo;Musings on the pond&rdquo; article lays out a thought-provoking proposal for a deep intervention in Algorand&rsquo;s economics. If you have not read it, it is well worth putting it at the top of your reading list and getting to it soon - even now, in fact: if you have the time, go read that first.
Among the proposed interventions is a set of changes to the minimum transaction fee, block rewards and fee burns that would alter the fixed nature of the total supply of Algorand. The present article discusses these changes."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://d13.co/posts/"},{"@type":"ListItem","position":2,"name":"Thoughts on \"a\" musing on the pond: Dynamic supply for Algorand","item":"https://d13.co/posts/musing-on-the-pond-dynamic-supply/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Thoughts on \"a\" musing on the pond: Dynamic supply for Algorand","name":"Thoughts on \u0022a\u0022 musing on the pond: Dynamic supply for Algorand","description":"The \u0026ldquo;Musings on the pond\u0026rdquo; article lays out a thought-provoking proposal for a deep intervention in Algorand\u0026rsquo;s economics. If you have not read it, it is well worth putting it at the top of your reading list and getting to it soon - even now, in fact: if you have the time, go read that first.\nAmong the proposed interventions is a set of changes to the minimum transaction fee, block rewards and fee burns that would alter the fixed nature of the total supply of Algorand. The present article discusses these changes.\n","keywords":["Algorand protocol","Inflation"],"articleBody":"The ‚ÄúMusings on the pond‚Äù article lays out a thought-provoking proposal for a deep intervention in Algorand‚Äôs economics. If you have not read it, it is well worth putting it at the top of your reading list and getting to it soon - even now, in fact: if you have the time, go read that first.\nAmong the proposed interventions is a set of changes to the minimum transaction fee, block rewards and fee burns that would alter the fixed nature of the total supply of Algorand. The present article discusses these changes.\nProposal: Per-block fee burn, issuance and dynamic supply The part of the overall proposal we will examine is laid out in three bullet points:\nAdjust transaction fees up from .001 -\u003e .01 Uncap Algorand‚Äôs supply ‚Äî Add programmatic issuance of ALGO per block for validators of .25 ALGO per block (mining) Add Burn mechanic per transaction ‚Äî Set dynamically at 50% of the txn fee (.005 without congestion), a block with 51 txns or more would be net deflationary (50 txns *.005 ALGO = .25 ALGO burnt = new issuance) All of these parameters could be adjusted over-time through governance\nSearch ‚ÄúA Holistic Proposal for Change‚Äù in the musings article.\nJohn: sorry I cut up your holistic proposal (this is only a part of it.)\nThe following example is also given: Example Block\n200 txns = 2 ALGO in total txn fees (.01*200)\n50% is burned = 1 ALGO\nThe 1 ALGO remaining is split between the fee sink (.5) and validator (.5)\n.25 ALGO is issued to the validator from the protocol\nThe validator would also get an incentive from the Node Incentives program (ranging up to 35 ALGO in the first year)\nThe validator would end up making ~35.75 ALGO from processing a single block in the first year with 200 txns\nThe fee sink would generate .5 ALGO from the block\nThe protocol would issue .25 new ALGO and burn 1 ALGO making total supply net deflationary (-.75 ALGO)\nHow even? ‚ÄúProtocol changes‚Äù The Algorand protocol, like most other blockchain protocols, can be changed - through consensus. This section briefly* describes the process.\n* Possible inaccuracies ahead - this is from memory.\nThere are multiple reasons to want protocol upgrades: Shorter or dynamic round times, upgrading the Algorand Virtual Machine (AVM) to new versions (e.g. supporting more smart contract opcodes), new protocol-level features (e.g. State Proofs) etc. Algorand is constantly improving, and the ability to upgrade the protocol is core to this evolution.\nThe protocol defines many parameters that can be tweaked, such as the minimum transaction fee, minimum balances for certain things etc. A protocol upgrade could, for instance, be just ‚Äúlower the minimum transaction fee to 900 microAlgo‚Äù.\nBut the more impactful upgrades, like the ones listed at the top, would require a substantially-improved/new version of algod to support them.\nThe process for all protocol upgrades, big and small, usually goes like this:\nDevelop new code, publish on Github, cut and test a release. An initial deployment is done to betanet. Betanet‚Äôs raison d‚Äô√™tre is to test new protocol versions without impacting testnet, which should be a stable network for developers to test on. It is the ‚Äúmove fast and break things‚Äù network. If the betanet deployment works out, the release is approved for deployments on testnet and mainnet, pending confirmation by each network‚Äôs consensus layer. Accepting protocol changes The actual protocol governance happens between nodes participating in consensus.\nWhen a new protocol version is ready to release on one of the public networks, this is advertised to participating nodes in the form of a vote.\nThis vote requires a supermajority (of 90%? I believe) to pass. The voters are the nodes participating in consensus, and their voting power is the ALGO they have as online stake. 1 ALGO = 1 vote. If 90% of the LGO participating in consensus decides to go for the next version of the protocol, then it is adopted network-wide.\nThe vote format is simple: upgrade your node to the latest available version to support the proposal, or abstain from upgrading to reject it. If the required supermajority is not met by the end of the voting period, the protocol upgrade is rejected.\nOne more disclaimer: the above is from memory, do not base your dissertation on the exact details.\nThE fOuNdAtIoN cAn ChAnGe ThE sUpPLy AnD dUmP oN YoU An entertaining bit of FUD from the past went something like this:\n‚ÄúThe Algorand foundation can just change the total supply and dump on your head‚Äù\nThis was based on an honest response by Fabrice in the Algorand forums early on (2021?), which went something like: ‚ÄúAlgorand is upgradable software, so yes, technically it is possible to change that parameter by changing how the protocol works.‚Äù\nReducing that statement to ‚Äúthey can just do it‚Äù is a masterful distillation of truth into single-malt bullshit:\nThe Foundation can‚Äôt ‚Äújust‚Äù do it. It would have to at least get buy-in from the super majority of online stake, and - The actual community that isn‚Äôt participating in consensus. The code is open after all, and a change like this would be widely discussed, and - This was presented as some unique Algorand Achilles heel - but basically all blockchains can do this! Ethereum switched their entire consensus model from PoW to PoS. Even Bitcoin introduces new protocol level features - e.g. taproot was introduced in 2021. Won‚Äôt someone think of the flation! The fixed supply is canon\nDare you speak of changing it?\nThink of the inflation\n- Confudius, 13 B.C.E\nFinally getting to the meat of the article: let‚Äôs examine a current- and bear-case for Algorand‚Äôs future, and see what kind of inflation this change would result in.\nRecall the two factors pushing and pulling the total supply under this proposed model:\nProgrammatic issuance of ALGO per block for validators: 0.25 ALGO per block Burn mechanic per transaction: 50% of the txn fees (.005 without congestion) The inflationary/deflationary threshold would be 50 transactions per block.\na block with 51 txns or more would be net deflationary (50 txns *.005 ALGO = .25 ALGO burnt = new issuance)\nIf today was groundhog day‚Ä¶ What would this look like if ‚Äútoday‚Äù was played out for an entire year under the new model?\nLet us look at this 24 hour range of blocks:\nBlock: 35659897 Time: 01/29/2024 09:42:32 PM Transaction counter: 1433848232 Block: 35690000 Time: 01/30/2024 09:42:32 PM Transaction counter: 1436876218 Block diff: 30,103 Txn diff: 3,027,986 Average block time: 2.87 s Average TPS: 35.04613425925926 Average TPB: 100.58240532407409 (per 2.87s block) Wait, that‚Äôs -\nPer block: Fees: 1.005824053240741 (@ 0.01 minimum fee) Total Supply: Issued: +0.25 Burned: -0.5029120266203705 (half the txn fees) Net supply change: -0.2529120266203705 - already deflationary üò≤.\nüì¢ With 2.87 second round time, the break-even TPS is 17.42 üëà\nSo if ‚Äútoday‚Äù played out under the new protocol, it would result in 0.2529 ALGO fewer total supply per block.\nIs that a lot? What if we did an entire year under this exact proposed model, with these exact values for TPS, block time, etc?\nWe had 30,103 blocks produced today, so the total supply would be reduced by 7613.05 ALGO and the yearly supply reduction (in this ground-hog day/year at the pond) would be 2,778,763.25 ALGO.\nI wouldn‚Äôt say no to getting a tip like that in my wallet, but what does it look like in context?\nThe total supply of 10,000,000,000.00 ALGO would become 9,997,221,236.75 ALGO.\nThe yearly inflation at ~35 TPS average would be negative 0.0278%.\nDo note that:\n‚Äútoday‚Äù (2024-01-30) was not cherry-picked, it is the day of the pondening, when the musings article was released. 0.0278% is a very small number 17.42 TPS is a very attainable number on this arbitrary day we were at slightly over 2x of the break-even 17.42 TPS But what if we have a very bad TPS year What kind of inflation would this model result in, if we had record-low TPS?\nLet‚Äôs go very, very, bear-in-the-dumps-low: 5 TPS.\nAll other figures being the same, we get:\nPer block: Txns: 14.35 Fees: 0.1435 (@ 0.01 minimum fee) Total Supply: Issued: 0.25 Burned: 0.07175 (half the txn fees) Net supply change (block): 0.178250 Net supply change (day): 5,365.8597 Net supply change (year): 1,958,538.80875 % Inflation: 0.0196% It is still peanuts, no? Consider this playing out over 10 years:\nTotal supply: +19,586,038.70 Decade % Inflation: 0.196% That is still nothing.\nPlayground spreadsheet I built a spreadsheet on Google Docs that you can go and play with different values for round time, or the parameters that John proposed, and see the outcome.\nMake a copy of it (or download it) to be able to tweak the inputs and answer any other ‚Äúbut what if-‚Äù questions you may have.\nConclusion While the ‚Äúfixed supply‚Äù model gave the community a sense of security and comfort that ‚Äúbeyond 2030 there would be no inflation‚Äù, changing this assumption and model is absolutely worth considering. The musings article has a lot more context on how these parameters would be governed, so it is essential supplemental reading.\nThe upside to a change like this is moving the protocol towards self-sustainability, and - through incentivising block proposers - decentralization.\nThe downside to this particular instance of the model (with the specific parameters) is almost too small to measure. The 5 TPS scenario above would come with much larger problems than 0.2% inflation over a decade: it would mean that the blockchain has failed to get traction. At that point, does it even matter?\nThe break-even of 17~18 TPS average seems like the least we should hope for in a successful, high throughput blockchain like Algorand - and on the arbitrary day that the ‚ÄúMusings‚Äù article as released, the protocol would have been (infinitesimally, again) deflationary already! 35 TPS is about double the required break-even TPS at the current 2.87 second round times.\nIf you have not yet read ‚ÄúMusings on the pond‚Äù, go do that.\nImages generated with DALL-E.\n","wordCount":"1669","inLanguage":"en","image":"https://d13.co/dall-e-princess-frog.png","datePublished":"2024-01-31T00:13:37Z","dateModified":"2024-01-31T00:13:37Z","author":{"@type":"Person","name":"Bit @ D13.co"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://d13.co/posts/musing-on-the-pond-dynamic-supply/"},"publisher":{"@type":"Organization","name":"D13.co","logo":{"@type":"ImageObject","url":"https://d13.co/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://d13.co/ accesskey=h title="  (Alt + H)"><img src=https://d13.co/images/logo-7-green-128.png alt=logo aria-label=logo height=48></a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://d13.co/>Home</a>&nbsp;¬ª&nbsp;<a href=https://d13.co/posts/>Posts</a></div><h1 class=post-title>Thoughts on "a" musing on the pond: Dynamic supply for Algorand</h1><div class=post-meta>&lt;span title='2024-01-31 00:13:37 +0000 +0000'>January 31, 2024&lt;/span>&amp;nbsp;¬∑&amp;nbsp;8 min&amp;nbsp;¬∑&amp;nbsp;1669 words&amp;nbsp;¬∑&amp;nbsp;Bit @ D13.co&nbsp;|&nbsp;<a href=https://github.com/d13co/d13.co/tree/main/content/posts/thoughts-on-a-musing-from-the-pond-dynamic-supply/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=lazy srcset="https://d13.co/posts/musing-on-the-pond-dynamic-supply/dall-e-princess-frog_hu2340680501393577228.png 360w ,https://d13.co/posts/musing-on-the-pond-dynamic-supply/dall-e-princess-frog_hu15911085961294797486.png 480w ,https://d13.co/posts/musing-on-the-pond-dynamic-supply/dall-e-princess-frog_hu17350442779169197286.png 720w ,https://d13.co/posts/musing-on-the-pond-dynamic-supply/dall-e-princess-frog.png 1024w" sizes="(min-width: 768px) 720px, 100vw" src=https://d13.co/posts/musing-on-the-pond-dynamic-supply/dall-e-princess-frog.png alt width=1024 height=1024></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#proposal-per-block-fee-burn-issuance-and-dynamic-supply>Proposal: Per-block fee burn, issuance and dynamic supply</a></li><li><a href=#how-even-protocol-changes>How even? &ldquo;Protocol changes&rdquo;</a><ul><li><a href=#accepting-protocol-changes>Accepting protocol changes</a></li><li><a href=#the-foundation-can-change-the-supply-and-dump-on-you>ThE fOuNdAtIoN cAn ChAnGe ThE sUpPLy AnD dUmP oN YoU</a></li></ul></li><li><a href=#wont-someone-think-of-the-flation>Won&rsquo;t someone think of the flation!</a><ul><li><a href=#if-today-was-groundhog-day>If today was groundhog day&mldr;</a></li><li><a href=#but-what-if-we-have-a-very-bad-tps-year>But what if we have a very bad TPS year</a></li></ul></li><li><a href=#playground-spreadsheet>Playground spreadsheet</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></details></div><div class=post-content><p><strong>The <a href=https://medium.com/@fishermanalgo/musings-on-the-pond-f1c6f6deeb72>&ldquo;Musings on the pond&rdquo;</a> article lays out a thought-provoking proposal for a deep intervention in Algorand&rsquo;s economics.</strong> If you have not read it, it is well worth putting it at the top of your reading list and getting to it soon - even now, in fact: if you have the time, go <a href=https://medium.com/@fishermanalgo/musings-on-the-pond-f1c6f6deeb72>read that first</a>.</p><p>Among the proposed interventions is <strong>a set of changes to the minimum transaction fee, block rewards and fee burns that would alter the fixed nature of the total supply of Algorand.</strong> The present article discusses these changes.</p><h2 id=proposal-per-block-fee-burn-issuance-and-dynamic-supply>Proposal: Per-block fee burn, issuance and dynamic supply<a hidden class=anchor aria-hidden=true href=#proposal-per-block-fee-burn-issuance-and-dynamic-supply>#</a></h2><p>The part of the overall proposal we will examine is laid out in three bullet points:</p><blockquote><ul><li>Adjust transaction fees up from .001 -> .01</li><li>Uncap Algorand‚Äôs supply ‚Äî Add programmatic issuance of ALGO per block for validators of .25 ALGO per block (mining)</li><li>Add Burn mechanic per transaction ‚Äî Set dynamically at 50% of the txn fee (.005 without congestion), a block with 51 txns or more would be net deflationary (50 txns *.005 ALGO = .25 ALGO burnt = new issuance)</li></ul><p>All of these parameters could be adjusted over-time through governance</p></blockquote><p><em>Search &ldquo;A Holistic Proposal for Change&rdquo; in the musings article.</em></p><p><em>John: sorry I cut up your holistic proposal (this is only a part of it.)</em></p><style>.details-collapsible{background:rgba(127,127,127,.2);padding:1.5em 1.25em;border-radius:3px;display:flex;flex-direction:row;margin-bottom:20px;padding-bottom:.5rem}.details-collapsible p:first-of-type{border-top:1px rgba(127,127,127,.2)solid;padding-top:.75em}.details-collapsible p{margin-left:1em}.details-collapsible summary{margin-bottom:1em}.details-collapsible summary::marker{border:1px red solid}@media(max-width:767px){#details-collapsible{padding:1.5em .75em 1.5em .6em}#details-collapsible-inner{margin-left:.5em}}</style><details class=details-collapsible><summary>The following example is also given:</summary><p>Example Block</p><p>200 txns = 2 ALGO in total txn fees (.01*200)</p><p>50% is burned = 1 ALGO</p><p>The 1 ALGO remaining is split between the fee sink (.5) and validator (.5)</p><p>.25 ALGO is issued to the validator from the protocol</p><p>The validator would also get an incentive from the Node Incentives program (ranging up to 35 ALGO in the first year)</p><p>The validator would end up making ~35.75 ALGO from processing a single block in the first year with 200 txns</p><p>The fee sink would generate .5 ALGO from the block</p><p>The protocol would issue .25 new ALGO and burn 1 ALGO making total supply net deflationary (-.75 ALGO)</p></details><h2 id=how-even-protocol-changes>How even? &ldquo;Protocol changes&rdquo;<a hidden class=anchor aria-hidden=true href=#how-even-protocol-changes>#</a></h2><p>The Algorand protocol, like most other blockchain protocols, can be changed - through consensus. This section briefly* describes the process.</p><p><em>* Possible inaccuracies ahead - this is from memory.</em></p><p>There are multiple reasons to want protocol upgrades: Shorter or dynamic round times, upgrading the Algorand Virtual Machine (AVM) to new versions (e.g. supporting more smart contract opcodes), new protocol-level features (e.g. State Proofs) etc. Algorand is constantly improving, and the ability to upgrade the protocol is core to this evolution.</p><p>The protocol defines many parameters that can be tweaked, such as the minimum transaction fee, minimum balances for certain things etc. A protocol upgrade could, for instance, be just &ldquo;lower the minimum transaction fee to 900 microAlgo&rdquo;.</p><p>But the more impactful upgrades, like the ones listed at the top, would require a substantially-improved/new version of algod to support them.</p><p>The process for all protocol upgrades, big and small, usually goes like this:</p><ul><li>Develop new code, publish on Github, cut and test a release.</li><li>An initial deployment is done to <code>betanet</code>.<ul><li>Betanet&rsquo;s raison d&rsquo;√™tre is to test new protocol versions without impacting <code>testnet</code>, which should be a stable network for developers to test on. It is the &ldquo;move fast and break things&rdquo; network.</li></ul></li><li>If the <code>betanet</code> deployment works out, the release is approved for deployments on <code>testnet</code> and <code>mainnet</code>, pending confirmation by each network&rsquo;s consensus layer.</li></ul><h3 id=accepting-protocol-changes>Accepting protocol changes<a hidden class=anchor aria-hidden=true href=#accepting-protocol-changes>#</a></h3><p>The actual protocol governance happens between nodes participating in consensus.</p><p>When a new protocol version is ready to release on one of the public networks, this is advertised to participating nodes in the form of a vote.</p><p><img loading=lazy src=dall-e-voting.png alt></p><p>This vote requires a supermajority (of 90%? I believe) to pass. The voters are the nodes participating in consensus, and their voting power is the ALGO they have as online stake. 1 ALGO = 1 vote. If 90% of the LGO participating in consensus decides to go for the next version of the protocol, then it is adopted network-wide.</p><p>The vote format is simple: upgrade your node to the latest available version to support the proposal, or abstain from upgrading to reject it. If the required supermajority is not met by the end of the voting period, the protocol upgrade is rejected.</p><p><em>One more disclaimer: the above is from memory, do not base your dissertation on the exact details.</em></p><h3 id=the-foundation-can-change-the-supply-and-dump-on-you>ThE fOuNdAtIoN cAn ChAnGe ThE sUpPLy AnD dUmP oN YoU<a hidden class=anchor aria-hidden=true href=#the-foundation-can-change-the-supply-and-dump-on-you>#</a></h3><p>An entertaining bit of FUD from the past went something like this:</p><blockquote><p>&ldquo;The Algorand foundation can just change the total supply and dump on your head&rdquo;</p></blockquote><p>This was based on an honest response by Fabrice in the Algorand forums early on (2021?), which went something like: &ldquo;Algorand is upgradable software, so yes, technically it is possible to change that parameter by changing how the protocol works.&rdquo;</p><p>Reducing that statement to &ldquo;they can just do it&rdquo; is a masterful distillation of truth into single-malt bullshit:</p><ol><li>The Foundation can&rsquo;t &ldquo;just&rdquo; do it. It would have to at least get buy-in from the super majority of online stake, and -</li><li>The actual community that isn&rsquo;t participating in consensus. The code is open after all, and a change like this would be widely discussed, and -</li><li>This was presented as some unique Algorand Achilles heel - but basically all blockchains can do this! Ethereum switched their entire consensus model from PoW to PoS. Even Bitcoin introduces new protocol level features - e.g. taproot was introduced in 2021.</li></ol><h2 id=wont-someone-think-of-the-flation>Won&rsquo;t someone think of the flation!<a hidden class=anchor aria-hidden=true href=#wont-someone-think-of-the-flation>#</a></h2><p><img loading=lazy src=dall-e-confudius.png alt></p><blockquote><p>The fixed supply is canon</p><p>Dare you speak of changing it?</p><p>Think of the inflation</p><p>- Confudius, 13 B.C.E</p></blockquote><p>Finally getting to the meat of the article: <strong>let&rsquo;s examine a current- and bear-case for Algorand&rsquo;s future, and see what kind of inflation this change would result in.</strong></p><p>Recall the two factors pushing and pulling the total supply under this proposed model:</p><ul><li>Programmatic issuance of ALGO per block for validators:<ul><li><ul><li>0.25 ALGO per block</li></ul></li></ul></li><li>Burn mechanic per transaction:<ul><li>50% of the txn fees (.005 without congestion)</li></ul></li></ul><p>The inflationary/deflationary threshold would be 50 transactions <strong>per block.</strong></p><blockquote><p>a block with 51 txns or more would be net deflationary (50 txns *.005 ALGO = .25 ALGO burnt = new issuance)</p></blockquote><h3 id=if-today-was-groundhog-day>If today was groundhog day&mldr;<a hidden class=anchor aria-hidden=true href=#if-today-was-groundhog-day>#</a></h3><p>What would this look like if &ldquo;today&rdquo; was played out for an entire year under the new model?</p><p>Let us look at this 24 hour range of blocks:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Block: 35659897
</span></span><span class=line><span class=cl>Time: 01/29/2024 09:42:32 PM
</span></span><span class=line><span class=cl>Transaction counter: 1433848232
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Block: 35690000
</span></span><span class=line><span class=cl>Time: 01/30/2024 09:42:32 PM
</span></span><span class=line><span class=cl>Transaction counter: 1436876218
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Block diff: 30,103
</span></span><span class=line><span class=cl>Txn diff: 3,027,986
</span></span><span class=line><span class=cl>Average block time: 2.87 s 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Average TPS: 35.04613425925926
</span></span><span class=line><span class=cl>Average TPB: 100.58240532407409 (per 2.87s block)
</span></span></code></pre></div><p>Wait, that&rsquo;s -</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Per block:
</span></span><span class=line><span class=cl>Fees: 1.005824053240741 (@ 0.01 minimum fee)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Total Supply:
</span></span><span class=line><span class=cl>Issued: +0.25 
</span></span><span class=line><span class=cl>Burned: -0.5029120266203705 (half the txn fees)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Net supply change: -0.2529120266203705
</span></span></code></pre></div><p>- already deflationary üò≤.</p><p>üì¢ <strong>With 2.87 second round time, the break-even TPS is 17.42</strong> üëà</p><p>So if &ldquo;today&rdquo; played out under the new protocol, it would result in 0.2529 ALGO fewer total supply per block.</p><p>Is that a lot? What if we did an entire year under this exact proposed model, with these exact values for TPS, block time, etc?</p><p>We had 30,103 blocks produced today, so the total supply would be reduced by 7613.05 ALGO and the yearly supply reduction (in this ground-hog day/year at the pond) would be 2,778,763.25 ALGO.</p><p>I wouldn&rsquo;t say no to getting a tip like that in my wallet, but what does it look like in context?</p><p>The total supply of 10,000,000,000.00 ALGO would become 9,997,221,236.75 ALGO.</p><p><strong>The yearly inflation at ~35 TPS average would be <em>negative</em> 0.0278%.</strong></p><p>Do note that:</p><ul><li>&ldquo;today&rdquo; (2024-01-30) was not cherry-picked, it is the day of the pondening, when the musings article was released.</li><li>0.0278% is a very small number</li><li>17.42 TPS is a very attainable number</li><li>on this arbitrary day we were at slightly over 2x of the break-even 17.42 TPS</li></ul><h3 id=but-what-if-we-have-a-very-bad-tps-year>But what if we have a very bad TPS year<a hidden class=anchor aria-hidden=true href=#but-what-if-we-have-a-very-bad-tps-year>#</a></h3><p>What kind of inflation would this model result in, if we had record-low TPS?</p><p>Let&rsquo;s go very, very, bear-in-the-dumps-low: 5 TPS.</p><p>All other figures being the same, we get:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Per block:
</span></span><span class=line><span class=cl>Txns: 14.35
</span></span><span class=line><span class=cl>Fees: 0.1435 (@ 0.01 minimum fee)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Total Supply:
</span></span><span class=line><span class=cl>Issued: 0.25
</span></span><span class=line><span class=cl>Burned: 0.07175 (half the txn fees)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Net supply change (block): 0.178250
</span></span><span class=line><span class=cl>Net supply change (day): 5,365.8597
</span></span><span class=line><span class=cl>Net supply change (year): 1,958,538.80875
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>% Inflation: 0.0196%
</span></span></code></pre></div><p>It is still peanuts, no? Consider this playing out over <em>10 years</em>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Total supply: +19,586,038.70
</span></span><span class=line><span class=cl>Decade % Inflation: 0.196%
</span></span></code></pre></div><p>That is <em>still</em> nothing.</p><h2 id=playground-spreadsheet>Playground spreadsheet<a hidden class=anchor aria-hidden=true href=#playground-spreadsheet>#</a></h2><p>I built a spreadsheet on <a href="https://docs.google.com/spreadsheets/d/1Cde3bZP7tQUI0sHqLcVAX2h1WOrqS-6OHZ5uOnT1btc/edit#gid=977708663">Google Docs</a> that you can go and play with different values for round time, or the parameters that John proposed, and see the outcome.</p><p>Make a copy of it (or download it) to be able to tweak the inputs and answer any other &ldquo;but what if-&rdquo; questions you may have.</p><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p><img loading=lazy src=dall-e-pondering.png alt></p><p>While the &ldquo;fixed supply&rdquo; model gave the community a sense of security and comfort that &ldquo;beyond 2030 there would be no inflation&rdquo;, changing this assumption and model is absolutely worth considering. The musings article has a lot more context on how these parameters would be governed, so it is essential supplemental reading.</p><p>The upside to a change like this is moving the protocol towards self-sustainability, and - through incentivising block proposers - decentralization.</p><p>The downside to this particular instance of the model (with the specific parameters) is almost too small to measure. The 5 TPS scenario above would come with much larger problems than 0.2% inflation over a decade: it would mean that the blockchain has failed to get traction. At that point, does it even matter?</p><p>The break-even of 17~18 TPS average seems like the <em>least</em> we should hope for in a successful, high throughput blockchain like Algorand - and on the arbitrary day that the &ldquo;Musings&rdquo; article as released, the protocol would have been (infinitesimally, again) deflationary already! 35 TPS is about double the required break-even TPS at the current 2.87 second round times.</p><p>If you have not yet read <a href=https://medium.com/@fishermanalgo/musings-on-the-pond-f1c6f6deeb72>&ldquo;Musings on the pond&rdquo;</a>, go do that.</p><p><img loading=lazy src=last.png alt></p><p>Images generated with DALL-E.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://d13.co/tags/algorand-protocol/>Algorand Protocol</a></li><li><a href=https://d13.co/tags/inflation/>Inflation</a></li></ul><nav class=paginav><a class=prev href=https://d13.co/posts/tinyman-governance-community-audit/><span class=title>¬´ Prev</span><br><span>Tinyman Governance: Community Audit</span>
</a><a class=next href=https://d13.co/posts/disclosure-tales-02-downward-facing-daos/><span class=title>Next ¬ª</span><br><span>Disclosure Tales 02: Downward Facing DAOs</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label='share Thoughts on "a" musing on the pond: Dynamic supply for Algorand on twitter' href="https://twitter.com/intent/tweet/?text=Thoughts%20on%20%22a%22%20musing%20on%20the%20pond%3a%20Dynamic%20supply%20for%20Algorand&amp;url=https%3a%2f%2fd13.co%2fposts%2fmusing-on-the-pond-dynamic-supply%2f&amp;hashtags=Algorandprotocol%2cInflation"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label='share Thoughts on "a" musing on the pond: Dynamic supply for Algorand on linkedin' href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fd13.co%2fposts%2fmusing-on-the-pond-dynamic-supply%2f&amp;title=Thoughts%20on%20%22a%22%20musing%20on%20the%20pond%3a%20Dynamic%20supply%20for%20Algorand&amp;summary=Thoughts%20on%20%22a%22%20musing%20on%20the%20pond%3a%20Dynamic%20supply%20for%20Algorand&amp;source=https%3a%2f%2fd13.co%2fposts%2fmusing-on-the-pond-dynamic-supply%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label='share Thoughts on "a" musing on the pond: Dynamic supply for Algorand on reddit' href="https://reddit.com/submit?url=https%3a%2f%2fd13.co%2fposts%2fmusing-on-the-pond-dynamic-supply%2f&title=Thoughts%20on%20%22a%22%20musing%20on%20the%20pond%3a%20Dynamic%20supply%20for%20Algorand"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label='share Thoughts on "a" musing on the pond: Dynamic supply for Algorand on facebook' href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fd13.co%2fposts%2fmusing-on-the-pond-dynamic-supply%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label='share Thoughts on "a" musing on the pond: Dynamic supply for Algorand on whatsapp' href="https://api.whatsapp.com/send?text=Thoughts%20on%20%22a%22%20musing%20on%20the%20pond%3a%20Dynamic%20supply%20for%20Algorand%20-%20https%3a%2f%2fd13.co%2fposts%2fmusing-on-the-pond-dynamic-supply%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label='share Thoughts on "a" musing on the pond: Dynamic supply for Algorand on telegram' href="https://telegram.me/share/url?text=Thoughts%20on%20%22a%22%20musing%20on%20the%20pond%3a%20Dynamic%20supply%20for%20Algorand&amp;url=https%3a%2f%2fd13.co%2fposts%2fmusing-on-the-pond-dynamic-supply%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://d13.co/>D13.co</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>